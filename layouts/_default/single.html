{{ define "main" }}
{{ if eq .Section "blog" }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  {{ with .Lastmod }}"dateModified": "{{ .Format "2006-01-02T15:04:05Z07:00" }}",{{ end }}
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.name }}"
  },
  {{ with .Description }}"description": "{{ . }}",{{ end }}
  {{ with .Params.image }}"image": "{{ . | absURL }}",{{ end }}
  "publisher": {
    "@type": "Person",
    "name": "{{ .Site.Params.name }}"
  }
}
</script>
{{ end }}
<article class="post">
    <div class="container">
        <header class="post-header">
            <h1 class="post-title">{{ .Title }}</h1>

            <div class="post-meta">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format "Monday, January 02, 2006" }}
                </time>

                {{ if and .Site.Params.showReadTime (ne .Section "comics") }}
                <span class="read-time">{{ math.Round (div (countwords .Content) 220.0) }} min</span>
                {{ end }}
            </div>

            {{ if and .Site.Params.showTags (ne .Section "comics") }}
            {{ with .Params.tags }}
            <div class="post-tags">
                {{ range . }}
                <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag">{{ . }}</a>
                {{ end }}
            </div>
            {{ end }}
            {{ end }}

            {{ if and .Params.image (eq .Section "comics") }}
            <img class="post-image" src="{{ .Params.image }}" alt="{{ .Params.alt | default .Title }}" loading="lazy" decoding="async">
            {{ end }}
        </header>

        <div class="post-content">
            {{ .Content }}
        </div>

        {{ partial "post-navigation.html" . }}

        {{ if .Site.Params.showRelated }}
        {{ partial "related.html" . }}
        {{ end }}

        <div class="breaker"></div>

        {{ partial "footer.html" . }}
    </div>
</article>
{{ end }}
